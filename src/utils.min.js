function poz(n){var t,r,i;return n==0?r=0:(t=.5*Math.abs(n),t>=6*.5?r=1:t<1?(i=t*t,r=((((((((.000124818987*i-.001075204047)*i+.005198775019)*i-.019198292004)*i+.059054035642)*i-.151968751364)*i+.319152932694)*i-.5319230073)*i+.797884560593)*t*2):(t-=2,r=(((((((((((((-45255659e-12*t+.00015252929)*t-19538132e-12)*t-.000676904986)*t+.001390604284)*t-.00079462082)*t-.002034254874)*t+.006549791214)*t-.010557625006)*t+.011630447319)*t-.009279453341)*t+.005353579108)*t-.002141268741)*t+.000535310849)*t+.999936657524)),n>0?(r+1)*.5:(1-r)*.5}function ex(n){return n<-BIGX?0:Math.exp(n)}function pochisq(n,t,i){var o=(t-1)*(i-1),f,c,s,r,e,u,h;if(n<=0||o<1)return 1;if(f=.5*n,h=!(o&1),o>1&&(c=ex(-f)),s=h?c:2*poz(-Math.sqrt(n)),o>2){if(n=.5*(o-1),u=h?1:.5,f>BIGX){for(r=h?0:.57236494292470008,e=Math.log(f);u<=n;)r=Math.log(u)+r,s+=ex(e*u-f-r),u+=1;return s}for(r=h?1:.56418958354775628/Math.sqrt(f),e=0;u<=n;)r=r*(f/u),e=e+r,u+=1;return e*c+s}return s}var tileSortBy,BIGX;Debug.log=function(n){window.console&&window.console.log&&typeof debug!="undefined"&&debug==!0&&window.console.log(n)};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}();PivotViewer.Utils.escapeMetaChars=function(n){return n.replace(/\|/gi,"\\|").replace(/\//gi,"\\/").replace(/'/gi,"\\'").replace(/,/gi,"\\,").replace(/:/gi,"\\:").replace(/\(/gi,"\\(").replace(/\)/gi,"\\)").replace(/\+/gi,"\\+").replace(/\+/gi,"\\-").replace(/\+/gi,"\\_").replace(/\+/gi,"\\%").replace(/\./gi,"\\_")};PivotViewer.Utils.htmlSpecialChars=function(n){return jQuery("<div />").text(n).html()};PivotViewer.Utils.now=function(){return Date.now?Date.now():(new Date).getTime()};PivotViewer.Utils.getOrdinalHistogram=function(n){var t;if(!n instanceof Array)return null;var i=Math.min.apply(null,n),u=Math.max.apply(null,n),f=u-i+1,r=[];for(t=0;t<f;t++)r[t]=0;for(t=0;t<n.length;t++)r[n[t]-i]++;return{histogram:r,min:i,max:u}};PivotViewer.Utils.getHistogram=function(n){var e,u,t;if(!n instanceof Array)return null;var r=Math.min.apply(null,n),f=Math.max.apply(null,n),i=(Math.floor(Math.pow(2*n.length,1/3))+1)*2;for(i>n.length?i=n.length:i>10&&(i=10),e=i==1?f-r+1:(f-r)/(i-1),u=[],t=0;t<i;t++)u[t]=0;for(t=0;t<n.length;t++)u[Math.floor((n[t]-r)/e)]++;return{histogram:u,min:r,max:f}},function(n){n.widget("suave.modSlider",n.ui.slider,{clearValues:function(){this.options.values=[this.options.min,this.options.max];this._refresh()},changeValues:function(n){for(var t=0;t<n.length;t++)n[t]=Math.floor(n[t]/this.options.step)*this.options.step;this.options.values=n;this._refresh()},addValue:function(n){n=Math.floor(n/this.options.step)*this.options.step;for(var t=0;t<this.options.values.length;t++)if(this.options.values[t]>n)break;this.options.values.splice(t,0,n);this._refresh()},removeValue:function(n){this.options.values.splice(n,1);this._refresh()}})}(jQuery);$.fn.bindFirst=function(n){this.on.apply(this,arguments);this.each(function(){var t=$._data(this,"events")[n.split(".")[0]],i=t.pop();t.splice(0,0,i)})},function(){var n=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Object.subClass=function(i){function u(){!n&&this.init&&this.init.apply(this,arguments)}var e=this.prototype,f,r;n=!0;f=new this;n=!1;for(r in i)f[r]=typeof i[r]=="function"&&typeof e[r]=="function"&&t.test(i[r])?function(n,t){return function(){var r=this._super,i;return this._super=e[n],i=t.apply(this,arguments),this._super=r,i}}(r,i[r]):i[r];return u.prototype=f,u.constructor=u,u.subClass=arguments.callee,u}}();typeof String.prototype.endsWith!="function"&&(String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1});typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.lastIndexOf(n,0)===0});Number.isInteger||(Number.isInteger=function(n){return typeof n=="number"&&isFinite(n)&&n>-9007199254740992&&n<9007199254740992&&Math.floor(n)===n});tileSortBy=function(n,t,i){var u,f=PivotCollection.getCategoryByName(n),e=[],r;if(i!=undefined)for(r=0;r<i.length;r++)e[i[r]]=!0;return u=f.isNumber()||f.isOrdinal()?function(t){var i=t.item.getFacetByName(n);return i==undefined?Infinity:i.values[0].value}:f.isDateTime()?function(t){var i=t.item.getFacetByName(n);return i==undefined?new Date(864e13):new Date(i.values[0].value)}:function(t){var u=t.item.getFacetByName(n),i,r;if(u==undefined)return"ZZZZZZZ";for(i=u.values,r=0;r<i.Length;r++)if(e[i[r]])return i[r].value.toUpperCase();return i[0].value.toUpperCase()},t=t==undefined?-1:[-1,1][+!!t],function(n,i){return n=u(n),i=u(i),t*((i>n)-(n>i))}};PivotViewer.Utils.getMonthName=function(n){return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]};PivotViewer.Utils.getHour=function(n){var t=n.getHours();return t==0?12:t>12?t-12:t};PivotViewer.Utils.getSeconds=function(n){var t=n.getSeconds();return t<10?"0"+t:t};PivotViewer.Utils.getMinutes=function(n){var t=n.getMinutes();return t<10?"0"+t:t};PivotViewer.Utils.getMeridian=function(n){return n.getHours()>11?"PM":"AM"};PivotViewer.Utils.getTimeValueFn=function(n,t){return t.getFullYear()-n.getFullYear()+n.getFullYear()%10>9?function(n){var t=new Date(n.value).getFullYear();return t-t%10}:t.getFullYear()>n.getFullYear()?function(n){return new Date(n.value).getFullYear()}:t.getMonth()>n.getMonth()?function(n){return new Date(n.value).getMonth()}:t.getDate()>n.getDate()?function(n){return new Date(n.value).getDate()}:t.getHours()>n.getHours()?function(n){return new Date(n.value).getHours()}:t.getMinutes()>n.getMinutes()?function(n){return new Date(n.value).getMinutes()}:function(n){return new Date(n.value).getSeconds()}};PivotViewer.Utils.getTimeLabelFn=function(n,t){return t.getFullYear()-n.getFullYear()+n.getFullYear()%10>9?function(n){var t=new Date(n.value).getFullYear();return t-t%10+"s"}:t.getFullYear()>n.getFullYear()?function(n){return new Date(n.value).getFullYear().toString()}:t.getMonth()>n.getMonth()?function(n){var t=new Date(n.value);return PivotViewer.Utils.getMonthName(t)+" "+t.getFullYear()}:t.getDate()>n.getDate()?function(n){var t=new Date(n.value);return PivotViewer.Utils.getMonthName(t)+" "+t.getDate()+", "+t.getFullYear()}:t.getHours()>n.getHours()?function(n){var t=new Date(n).value;return PivotViewer.Utils.getMonthName(t)+" "+t.getDate()+", "+t.getFullYear()+" "+PivotViewer.Utils.getHour(t)+" "+PivotViewer.Utils.getMeridian(t)}:t.getMinutes()>n.getMinutes()?function(n){var t=new Date(n.value);return PivotViewer.Utils.getMonthName(t)+" "+t.getDate()+", "+t.getFullYear()+" "+PivotViewer.Utils.getHour(t)+":"+PivotViewer.Utils.getMinutes(t)+" "+PivotViewer.Utils.getMeridian(t)}:function(n){var t=new Date(n.value);return PivotViewer.Utils.getMonthName(t)+" "+t.getDate()+", "+t.getFullYear()+" "+PivotViewer.Utils.getHour(t)+":"+PivotViewer.Utils.getMinutes(t)+"::"+PivotViewer.Utils.getSeconds(t)+" "+PivotViewer.Utils.getMeridian(t)}};PivotViewer.Utils.fillBuckets=function(n,t,i,r){var i,v,s,l,c,a,e,y,o,u,h,f;if(r==undefined&&(r=function(n){return n.value}),n.ids=[],i=PivotCollection.getCategoryByName(i),i.isNumber()||i.isOrdinal()){for(o=0,f=0;o<t.length;o++){if(u=t[o],h=u.item.getFacetByName(i.name),h==undefined)break;if(!u.missing){for(v=h.values[0];r(v)>=n[f].endRange&&f<n.length-1;)f++;n[f].addTile(u);n.ids[u.item.id]=f}}for(s=Infinity,e=0;e<n.length-1;e++)l=n[e],c=l.tiles,c.length>0&&(a=l.endRange-r(c[c.length-1].item.getFacetByName(i.name).values[0]),a<s&&(s=a));for(s=Math.pow(10,Math.floor(Math.log(s)/Math.log(10))),s>1&&(s=1),e=0;e<n.length-1;e++)n[e].endLabel=(n[e].endRange-s).toString()}else for(y=[],o=0;o<t.length;o++){if(u=t[o],h=u.item.getFacetByName(i.name),h==undefined)break;u.missing||(f=n.values[r(h.values[0])],n[f].addTile(u),n.ids[u.item.id]=f)}};PivotViewer.Utils.getBuckets=function(n,t,i,r){var o,v,b,h,k,w,nt,d,c,y,g,l,e,p,f,s;i==undefined&&(i=function(n){return n.value});r==undefined&&(r=function(n){return n.label.toString()});var u=[],a=n[0].item.getFacetByName(t).values[0],nt=i(a),w=r(a),f=new PivotViewer.Models.Bucket(a.value,w);for(f.addTile(n[0]),f.addValue(a.value),u.push(f),o=1,e=0;o<n.length;o++){if(v=n[o],b=v.item.getFacetByName(t),b==undefined)break;v.missing||(h=b.values[0],k=i(h),k!=nt?(a=h,w=r(h),nt=k,u[++e]=new PivotViewer.Models.Bucket(h.value,w),u[e].addTile(v),u[e].addValue(h.value)):(u[e].addTile(v),u[e].endRange=h.value))}if(u.length>10){for(d=Math.ceil(u.length/10),c=[],c.ids=[],y=0,s=0;y<u.length;y++){g=y%d;f=u[y];g==0?(c[s]=f,l=c[s]):(l=c[s],l.endRange=f.endRange,l.endLabel=f.endLabel,Array.prototype.push.apply(l.tiles,f.tiles),Array.prototype.push.apply(l.values,f.values));for(p in f.ids)l.ids[p]=!0,c.ids[p]=s;g+1==d&&s++}u=c}else for(u.ids=[],e=0;e<u.length;e++)for(p in u[e].ids)u.ids[p]=e;if(o!=n.length&&Settings.showMissing)for(f=new PivotViewer.Models.Bucket("(no info)","(no info"),u.push(f),s=u.length-1;o<n.length;o++)f.addTile(n[o]),u.ids[n[o].item.id]=s;return u};PivotViewer.Utils.loadScript=function(n){if($("script[src*='"+n+"']").length==0){var t=document.createElement("script");t.type="text/javascript";t.src=n;$("head").append(t)}};PivotViewer.Utils.loadCSS=function(n){var t=document.createElement("link");t.rel="stylesheet";t.type="text/css";t.href=n};BIGX=20;